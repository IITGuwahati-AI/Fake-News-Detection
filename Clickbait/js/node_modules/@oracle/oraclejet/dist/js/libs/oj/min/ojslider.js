/**
 * @license
 * Copyright (c) 2014, 2019, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","jqueryui-amd/widgets/draggable","ojs/ojtouchproxy"],function(t,e){"use strict";var i={properties:{describedBy:{type:"string"},disabled:{type:"boolean",value:!1},displayOptions:{type:"object",properties:{converterHint:{type:"Array<string>|string",value:["placeholder","notewindow"]},helpInstruction:{type:"Array<string>|string",value:["notewindow"]},messages:{type:"Array<string>|string",value:["inline"]},validatorHint:{type:"Array<string>|string",value:["notewindow"]}}},help:{type:"object",properties:{instruction:{type:"string",value:""}}},helpHints:{type:"object",properties:{definition:{type:"string",value:""},source:{type:"string",value:""}}},labelHint:{type:"string",value:""},labelledBy:{type:"string"},max:{type:"number"},messagesCustom:{type:"Array<Object>",writeback:!0,value:[]},min:{type:"number"},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},step:{type:"number",value:1},transientValue:{type:"number",writeback:!0,readOnly:!0},translations:{type:"object",value:{},properties:{invalidStep:{type:"string"},maxMin:{type:"string"},noValue:{type:"string"},optionNum:{type:"string"},valueRange:{type:"string"}}},type:{type:"string",enumValues:["fromMax","fromMin","single"],value:"fromMin"},valid:{type:"string",writeback:!0,enumValues:["invalidHidden","invalidShown","pending","valid"],readOnly:!0},value:{type:"number",writeback:!0,value:0}},methods:{refresh:{},reset:{},showMessages:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateStart:{},ojAnimateEnd:{}},extension:{}};t.__registerWidget("oj.ojSlider",e.oj.editableValue,{defaultElement:"<input>",version:"1.0.1",widgetEventPrefix:"oj",options:{labelledBy:null,max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0,rawValue:void 0},_numPages:5,_defaultElementId:null,_sliderDisplayValue:null,_isRTL:function(){return"rtl"===t.DomUtils.getReadingDirection()},_ComponentCreate:function(){if(this._super(),this._inputtag=!1,this.element.is("INPUT"))if(this._inputtag=!0,this.element[0].style&&(this._styleFromInputTag=this.element[0].style.cssText),this._inputElementOriginalDisplay=this.element.css("display"),this.element.css("display","none"),this.OuterWrapper)this._elementWrapped=e(this.OuterWrapper);else{var t=e(this.element).wrap("<div> </div>");this._elementWrapped=t.parent()}else this._elementWrapped=this.element;this._transientValueName=this._IsCustomElement()?"transientValue":"rawValue",this._componentCreateStyling(),this._componentSetup()},_SetRawValue:function(e,i){var s={};s._context={originalEvent:i,writeback:!0,internalSet:!0,readOnly:!0},t.Object.compareValues(this.options[this._transientValueName],e)||this.option(this._transientValueName,e,s)},_componentCreateStyling:function(){this._elementWrapped[0].classList.add("oj-slider","oj-component","oj-form-control"),this._setOrientationStyles(!0)},_setOrientationStyles:function(t){var e=this._elementWrapped[0];this._isVertical()?(t||e.classList.remove("oj-slider-horizontal"),e.classList.add("oj-slider-vertical")):(t||e.classList.remove("oj-slider-vertical"),e.classList.add("oj-slider-horizontal"))},_componentSetup:function(){this._newMultiValue=[],this._thumbIndex=null,"range"===this.options.type?this._multipleThumbs=!0:this._multipleThumbs=!1,this._calculateNewMax(),this._createSliderContainer(),this._createBarBackground(),this._buildValueOption(),this._createRange(),this._createThumbs(),this._updateUI(),this._setupEvents()},_copyLabelledbyToThumb:function(t){var i=this._elementWrapped.find(".oj-slider-thumb");if(i.attr("aria-labelledby",t),i.length>1){var s=i[1];e(s).attr("aria-labelledby",String(t))}},_AfterCreate:function(){this._super(),this._makeDraggable(),this._setAriaInfo()},_setAriaInfo:function(){var e,i,s;if(this.OuterWrapper){if(this.options.labelledBy){var a=this.uuid+"_Label";s=t.EditableValueUtils._getOjLabelAriaLabelledBy(this.options.labelledBy,a),this._copyLabelledbyToThumb(s)}this.options.labelledBy&&!document.getElementById(this.options.labelledBy)||(e=this.OuterWrapper.getAttribute("aria-label"))&&this.OuterWrapper.querySelector(".oj-slider-thumb").setAttribute("aria-label",e)}else if(i=this._GetLabelElementLocal()){var r=i.attr("id");r||(r=i.attr("for")),r.length>0&&this._copyLabelledbyToThumb(r)}else(e=this.element.attr("aria-label"))&&this._elementWrapped.find(".oj-slider-thumb").attr("aria-label",e)},_GetLabelElementLocal:function(){var t=this._getAriaLabelledByElementLocal();return null!==t&&0!==t.length?t:null!==(t=this._getAriaLabelForElementLocal())&&0!==t.length?t:null},_getAriaLabelForElementLocal:function(){var t;if(void 0!==(t=this.element.prop("id"))){var i=e("label[for='"+t+"']");if(i.length>0)return i;var s="span[for='"+t+"']";if(0!==e(s).length)return e(s)}return null},_getAriaLabelledByElementLocal:function(){var t=this.element.attr("aria-labelledby");if(void 0===t&&this.OuterWrapper){var i=this._elementWrapped.attr("aria-labelledby");if(i&&null!==document.getElementById(i))return e(document.getElementById(i))}if(void 0!==t){var s=e("label[id='"+t+"']");if(s.length>0)return s;var a=e("span[id='"+t+"']");if(a.length>0)return a}return null},widget:function(){return this._elementWrapped},_SetDisplayValue:function(t){this._sliderDisplayValue=t},_GetDisplayValue:function(){return this._sliderDisplayValue},_getElementId:function(){return this.OuterWrapper?(this._elementWrapped[0].id||this._elementWrapped.uniqueId(),this._elementWrapped[0].id):(this.element[0].id||this.element.uniqueId(),this.element[0].id)},_getThumbId:function(t){return this._getElementId()+"-thumb"+t},_getBarValueId:function(){return this._getElementId()+"-barValue"},_getBarBackgroundId:function(){return this._getElementId()+"-barBack"},_getSliderWrapperId:function(){return this._getElementId()+"-sliderWrapper"},_createThumbs:function(){var t,i,s="",a="class='oj-slider-thumb ui-state-default' tabindex='0' role='slider'aria-valuemin = '"+this._valueMin()+"' aria-valuemax = '"+this._valueMax()+"' ></span>",r=[];for(i=this._multipleThumbs?2:1,t=0;t<i;t++)s="<span id='"+this._getThumbId(t)+"' "+a,r.push(s);this._thumbs=e(r.join("")).appendTo(this._sliderContainer),this._thumb=this._thumbs.eq(0),this._refreshThumbOptions()},_refreshThumbOptions:function(){var t=this,i=0;this._thumbs.each(function(){e(this).data("oj-slider-thumb-index",i),i+=1,t._isVertical()&&e(this).attr("aria-orientation","vertical"),t.options.disabled?(e(this).attr("aria-disabled","true"),e(this).removeAttr("tabindex")):(e(this).removeAttr("aria-disabled"),e(this).attr("tabindex","0")),t.options.readOnly?e(this).attr("title","read only"):e(this).removeAttr("title")})},_createSliderContainer:function(){var t=this._getSliderWrapperId(),i=this._elementWrapped.find("#"+t);i.length&&i.remove(),this._sliderContainer=e("<div></div>"),e(this._sliderContainer).attr("id",t),this._sliderContainer.addClass("oj-slider-container"),this.element.after(this._sliderContainer),this._sliderContainer[0].style.cssText=this._styleFromInputTag},_createBarBackground:function(){var t=this._getBarBackgroundId(),i=this._elementWrapped.find("#"+t);i.length&&i.remove(),this._barback=e("<div></div>"),e(this._barback).attr("id",t),this._barback.addClass("oj-slider-bar"),this._sliderContainer.append(this._barback);var s=this;this._barback.on("mousedown"+s.eventNamespace,function(t){s._repositionThumb(t),s._mouseStop(t),s._getActiveThumb().focus()})},_buildValueOption:function(){if(this.options.type)if(null==this.options.value)this._multipleThumbs?this.options.value=[this._valueMin(),this._valueMax()]:this.options.value=this._valueMin(),this.option("value",this.options.value,{_context:{writeback:!0,internalSet:!0}});else if(this._multipleThumbs){var t;2!==this.options.value.length&&(t=this.options.value.length>0?this.options.value[0]:this._valueMin(),this.options.value=[t,this._valueMax()],this.option("value",this.options.value,{_context:{writeback:!0,internalSet:!0}}))}},_createRange:function(){var t=this.options,i="";if(t.type){this._range=e("<div></div>"),e(this._range).attr("id",this._getBarValueId()),this._sliderContainer.append(this._range),i="oj-slider-range oj-slider-bar-value";var s=this;this._range.on("mousedown"+s.eventNamespace,function(t){s._repositionThumb(t),s._mouseStop(t),s._getActiveThumb().focus()}),this._range=this._sliderContainer.find("#"+this._getBarValueId());var a="";"fromMin"===t.type?a=" oj-slider-range-min":"fromMax"===t.type&&(a=" oj-slider-range-max"),this._range.addClass(i+a)}else this._range&&this._range.remove(),this._range=null},_setupTouch:function(e){this._touchProxy=t._TouchProxy.addTouchListeners(e)},_tearDownTouch:function(e){t._TouchProxy.removeTouchListeners(e)},_setupEvents:function(){this._CanSetValue()&&this._AddHoverable(this._elementWrapped),this._thumbs.toArray().forEach(function(t){var i=e(t);this._UnregisterChildNode(i),this._on(i,this._thumbEvents),this._setupTouch(i),this._focusable({element:i,applyHighlight:!0})},this)},_GetMessagingLauncherElement:function(){return this._elementWrapped},_GetContentElement:function(){return this._getActiveThumb()},_destroySliderDom:function(){this._thumbs.toArray().forEach(function(t){var i=e(t);this._tearDownTouch(i)},this),this._destroyDraggable(),this._range&&this._range.remove(),this._sliderContainer&&this._sliderContainer.remove(),this.OuterWrapper?(this._elementWrapped.removeUniqueId(),this._RemoveHoverable(this._elementWrapped)):(this.element.removeUniqueId(),this._RemoveHoverable(this.element))},_unwrapSlider:function(){t.DomUtils.unwrap(this.element,this._elementWrapped),this.element.css("display",this._inputElementOriginalDisplay),this._RestoreAttributes(this.element)},_destroy:function(){return this._destroySliderDom(),this._unwrapSlider(),this._super()},_repositionThumb:function(t){var i,s,a,r=this.options,n=0,l=this;return this._closestThumb=this._thumb,!(r.disabled||r.readOnly||(i={x:t.pageX,y:t.pageY},s=this._getNormValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,this._multipleThumbs&&this._thumbs.each(function(t){var i=Math.abs(s-l._getMultiValues(t));(a>i||a===i&&(t===l._lastChangedValueIndex||l._getMultiValues(t)===r.min))&&(a=i,this._closestThumb=e(this),n=t)}),this._thumbIndex=n,this._closestThumb&&(this._thumbs.hasClass("ui-state-hover")||this._slide(t,n,s),this._getActiveThumb().addClass("oj-active").focus(),this._range.addClass("oj-active"),0)))},_initDragging:function(t,e){var i=this.options;return!i.disabled&&!i.readOnly&&(e.removeClass("oj-focus-highlight"),e.addClass("oj-active").focus(),this._range.addClass("oj-active"),!0)},_mouseDragInternal:function(t,e){var i=this._getNormValueFromThumb(e);this._slide(t,this._thumbIndex,i,!0);var s=100*this._getFracFromThumb(e);return this._multipleThumbs?this._setRangeMultiThumb(s,this._thumbIndex):this._setRange(s),!1},_mouseStop:function(t,e){this._thumbs.removeClass("oj-active"),this._range.removeClass("oj-active");var i=this._getNormValueFromThumb(e);return this._slide(t,this._thumbIndex,i),this._change(t,this._thumbIndex,!1),this._thumbIndex=null,!1},_isVertical:function(){return"vertical"===this.options.orientation},_getOrientationAdjustedFrac:function(t){var e=t;return e>1&&(e=1),e<0&&(e=0),this._isVertical()&&(e=1-e),e},_getNormValueFromMouse:function(t){var e,i,s=this._getFracFromMouse(t);return e=this._valueMax()-this._valueMin(),this._isRTL()&&!this._isVertical()&&(s=1-s),i=this._valueMin()+s*e,this._trimAlignValue(i)},_getFracFromMouse:function(t){var e,i,s;return this._isVertical()?(e=this._barback.height(),i=t.y-this._barback.offset().top):(e=this._barback.width(),i=t.x-this._barback.offset().left),0===e?1:(s=i/e,s=this._getOrientationAdjustedFrac(s))},_getActiveThumb:function(){return this._multipleThumbs?e(this._thumbs[this._thumbIndex]):this._thumb},_getFracFromThumb:function(t){var e,i,s,a,r=t;if(t||(r=this._getActiveThumb()),this._isVertical()){var n=r.outerHeight()/2;a=r.offset().top+n,e=this._barback.height(),i=a-this._barback.offset().top}else{var l=r.outerWidth()/2;a=r.offset().left+l,e=this._barback.width(),i=a-this._barback.offset().left}return 0===e?1:(s=i/e,s=this._getOrientationAdjustedFrac(s))},_getNormValueFromThumb:function(t){var e,i,s;return e=this._getFracFromThumb(t),i=this._valueMax()-this._valueMin(),this._isRTL()&&!this._isVertical()&&(e=1-e),s=this._valueMin()+e*i,this._trimAlignValue(s)},_getOtherThumbValue:function(t){return this._getMultiValues(t?0:1)},_getNewThumbValueLimited:function(t,e,i){return 2===this.options.value.length&&(0===t&&e>i||1===t&&e<i)?i:e},_slide:function(t,e,i,s){var a;if(this._multipleThumbs){a=this._getOtherThumbValue(e);var r=this._getNewThumbValueLimited(e,i,a);r!==this._getMultiValues(e)&&this._setMultiValue(t,e,r,s)}else i!==this._getSingleValue()&&(this._setSingleValue(t,i,s),s||this._inputtag&&this.element.val(i))},_setSingleValue:function(t,e,i){this._newValue=this._trimAlignValue(e),this._SetRawValue(this._newValue,t),i||(this.options[this._transientValueName]=this._newValue,this._SetValue(this._newValue,t),this._updateUI())},_change:function(t,e,i){this._multipleThumbs?(this._lastChangedValues=this._getNewValues(e,this._newMultiValue[e]),this._SetRawValue(this._lastChangedValues,t),i||this._SetValue(this._lastChangedValues,t)):(this._SetRawValue(this._newValue,t),i||this._SetValue(this._newValue,t)),this._lastChangedValueIndex=e},_getNewValues:function(t,e){var i,s;for(i=this.options.value.slice(),s=0;s<i.length;s++)i[s]=this._trimAlignValue(i[s]);return t===this._thumbIndex&&(i[t]=e),i},_getSingleValue:function(){return this._getValueAligned()},_getMultiValues:function(t){return this._getValuesAligned(t)},_setMultiValue:function(t,e,i,s){this._newMultiValue[e]=this._trimAlignValue(i),this._change(t,e,s),s||this._updateUI()},_setOption:function(t,e,i){var s;if("value"===t)if(Array.isArray(e))if(isNaN(e[0]))this._multipleThumbs=!1,s=this._parse(t,e[0]),this._checkValueBounds(s,this._valueMin(),this._valueMax());else{this._multipleThumbs=!0,s=e;for(var a=0;a<s.length;a++)this._checkValueBounds(s[a],this._valueMin(),this._valueMax())}else this._multipleThumbs=!1,s=this._IsCustomElement()?e:this._parse(t,e),this._checkValueBounds(s,this._valueMin(),this._valueMax());switch("max"===t||"min"===t?(s=this._IsCustomElement()?e:this._parse(t,e),"min"===t?(this._checkMinMax(s,this._valueMax()),this._multipleThumbs?(this._getMultiValues(0)<s&&this._super("value",[s,this._getMultiValues(1)],i),this._getMultiValues(1)<s&&this._super("value",[this._getMultiValues(0),s],i)):this._getSingleValue()<s&&this._super("value",s,i)):"max"===t&&(this._checkMinMax(this._valueMin(),s),this._multipleThumbs?(this._getMultiValues(0)>s&&this._super("value",[s,this._getMultiValues(1)],i),this._getMultiValues(1)>s&&this._super("value",[this._getMultiValues(0),s],i)):this._getSingleValue()>s&&this._super("value",s,i))):s="step"===t?this._parseStep(e):e,this._super(t,s,i),"readOnly"===t&&(this.options.readonly=s),"disabled"===t&&(this.options.disabled=s),t){case"disabled":this._refreshThumbOptions(),this.options.disabled?this._disableDraggable():this._makeDraggable();break;case"value":this._updateUI(),this._makeDraggable();break;case"min":case"max":this._calculateNewMax(),this._updateUI(),this._makeDraggable();break;case"orientation":this._setOrientationStyles(),this._reCreate();break;case"readonly":case"step":case"type":this._reCreate();break;case"labelledBy":this._setAriaInfo()}},_reCreate:function(){this._destroySliderDom(),this._componentSetup(),this.OuterWrapper&&this._elementWrapped.addClass("oj-complete"),this._AfterCreate()},_getValueAligned:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_getValuesAligned:function(t){return this._trimAlignValue(this.options.value[t])},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var t=this._valueMin();if((this.options.max-t)/this.options.step%1!=0){var e=(this.options.max-t)%this.options.step;this.max=this.options.max-e+this.options.step}else this.max=this.options.max},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_getGrid:function(){var t;t=this.options.step>0?(this._valueMax()-this._valueMin())/this.options.step:100;var e=(this._isVertical()?this._barback.height():this._barback.width())/t;return e<1&&(e=1),this._isVertical()?[1,e]:[e,1]},_getThumbsValueFrac:function(t){return(this._getMultiValues(t)-this._valueMin())/(this._valueMax()-this._valueMin())},_updateUI:function(){var t,i,s,a;this._multipleThumbs?this._thumbs.toArray().forEach(function(i,r){var n=e(i);t=100*this._getThumbsValueFrac(r),this._isRTL()&&!this._isVertical()&&(t=100-t),this._isVertical()?n.css({top:100-t+"%"}):n.css({left:t+"%"}),0===r&&(100===t?n.css({zIndex:1}):n.css({zIndex:""})),n.hasClass("oj-active")||(n.attr("aria-valuenow",this._getMultiValues(r)),n.attr("aria-valuemin",s),n.attr("aria-valuemax",a)),this._setRangeMultiThumb(t,r)},this):(i=this._getValueAligned(),s=this._valueMin(),a=this._valueMax(),t=a!==s?(i-s)/(a-s)*100:0,this._isRTL()&&!this._isVertical()&&(t=100-t),this._isVertical()?this._thumb.css({top:100-t+"%"}):this._thumb.css({left:t+"%"}),e(this._thumb).hasClass("oj-active")||(e(this._thumb).attr("aria-valuenow",i),e(this._thumb).attr("aria-valuemin",s),e(this._thumb).attr("aria-valuemax",a)),this._setRange(t))},_setRange:function(t){var e=this.options.type;this._isVertical()?("fromMin"===e&&this._range.css({height:t+"%"}),"fromMax"===e&&this._range.css({height:100-t+"%"})):this._isRTL()?("fromMin"===e&&this._range.css({width:100-t+"%"}),"fromMax"===e&&this._range.css({width:t+"%"})):("fromMin"===e&&this._range.css({width:t+"%"}),"fromMax"===e&&this._range.css({width:100-t+"%"}))},_setRangeMultiThumb:function(t,e){var i=this._range.attr("id");if(0===e){var s=100*this._getThumbsValueFrac(1);switch(this.options.type){case"fromMin":this._isVertical()?this._range.css({height:t+"%"}):this._range.css({width:t+"%"});break;case"range":this._isVertical()?(this._range.css({top:100-s+"%"}),this._range.css({height:s-t+"%"})):this._isRTL()?(this._range.css({left:100-s+"%"}),this._range.css({width:s-(100-t)+"%"})):(this._range.css({left:t+"%"}),this._range.css({width:s-t+"%"}))}}else{var a=100*this._getThumbsValueFrac(0);switch(this.options.type){case"fromMax":this._isVertical()?this._range.css({height:100-t+"%"}):this._range.css({width:100-t+"%"});break;case"range":if(this._isVertical())document.getElementById(i)&&(this._range.css({top:100-t+"%"}),this._range.css({height:t-a+"%"}));else if(this._isRTL())document.getElementById(i)&&(this._range.css({left:t+"%"}),this._range.css({width:100-t-a+"%"}));else if(document.getElementById(i)){var r=parseInt(document.getElementById(i).style.left,10);this._range.css({width:t-r+"%"})}}}},_thumbEvents:{keydown:function(t){var i,s,a,r,n=e(t.target).data("oj-slider-thumb-index");switch(this._thumbIndex=n,t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault(),e(t.target).addClass("oj-active")}switch(a=this.options.step,i=s=this._multipleThumbs?this._getMultiValues(n):this._getSingleValue(),t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this._numPages);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this._numPages);break;case e.ui.keyCode.UP:if(i===this._valueMax())return;r=i+a,s=this._trimAlignValue(r);break;case e.ui.keyCode.RIGHT:if(!this._isRTL()||this._isVertical()){if(i===this._valueMax())return;r=i+a}else{if(i===this._valueMin())return;r=i-a}s=this._trimAlignValue(r);break;case e.ui.keyCode.DOWN:if(i===this._valueMin())return;r=i-a,s=this._trimAlignValue(r);break;case e.ui.keyCode.LEFT:if(!this._isRTL()||this._isVertical()){if(i===this._valueMin())return;r=i-a}else{if(i===this._valueMax())return;r=i+a}s=this._trimAlignValue(r)}this._slide(t,n,s)},keyup:function(t){switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:var i=e(t.target).data("oj-slider-thumb-index");this._thumbIndex=i,this._change(t,i,!1),e(t.target).removeClass("oj-active"),this._updateUI(!0),this._thumbIndex=null}}},_InitOptions:function(e,i){var s=this.options,a=this;if(this._superApply(arguments),t.EditableValueUtils.initializeOptionsFromDom([{attribute:"disabled",validateOption:!0},{attribute:"value"},{attribute:"title"},{attribute:"min"},{attribute:"max"},{attribute:"step"}],i,this,function(t){for(var e=t,i=["value","step","min","max"],r=0;r<i.length;r++){var n=i[r],l=n in e?e[n]:s[n];null!=l&&("step"===n?e[n]=a._parseStep(l):"min"===n||"max"===n?e[n]=a._parse(n,l):"value"===n&&(Array.isArray(l)?e[n]=l:e[n]=a._parse(n,l)))}}),!this._IsCustomElement()&&void 0===s.value)throw new Error(this.getTranslatedString("noValue"));if(this._checkMinMax(s.min,s.max),Array.isArray(s.value))for(var r=0;r<s.value.length;r+=1)this._checkValueBounds(s.value[r],s.min,s.max);else this._checkValueBounds(s.value,s.min,s.max)},_checkValueBounds:function(t,e,i){if(null!=e&&t<e)throw new Error(this.getTranslatedString("valueRange"));if(null!=i&&t>i)throw new Error(this.getTranslatedString("valueRange"))},_checkMinMax:function(t,e){if(null!=t&&null!=e&&t>=e)throw new Error(this.getTranslatedString("maxMin"))},getNodeBySubId:function(t){if(null==t)return this.element?this.element[0]:null;var e=t.subId;return"oj-slider-thumb-0"===e?this.widget().find(".oj-slider-thumb")[0]:"oj-slider-thumb-1"===e?this.widget().find(".oj-slider-thumb")[1]:"oj-slider-bar"===e?this.widget().find("."+e)[0]:"oj-slider-bar-value"===e?this.widget().find("."+e)[0]:null},getSubIdByNode:function(t){if(null!=t){if(t.id===this._getThumbId(0)&&e(t).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};if(t.id===this._getThumbId(1)&&e(t).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if(e(t).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};if(e(t).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},_GetDefaultStyleClass:function(){return"oj-slider"},_parse:function(t,e){var i;if(i=null!==e?+e:e,isNaN(i))throw new Error(this.getTranslatedString("optionNum",{option:t}));return i},_parseStep:function(t){var e;if(null===t)return 1;if((e=this._parse("step",t))<=0)throw new Error(this.getTranslatedString("invalidStep"));return(null===e||e<=0)&&(e=1),e},_getEndInterval:function(){return this._barback.offset().left+this._barback.width()},_getStartInterval:function(){return this._barback.offset().left},_callDraggable:function(t){var i,s=this._getGrid(),a=t[0].style;i=this._isVertical()?"y":"x";var r=this;t.draggable({axis:i,grid:s,disabled:!1,start:function(i){t[0]===e(r._thumbs)[0]?r._thumbIndex=0:t[0]===e(r._thumbs)[1]&&(r._thumbIndex=1),r._initDragging(i,t)},drag:function(i,s){var n=s.position;if(r._isVertical()?(a.left="",n.left=""):(a.top="",n.top=""),r._mouseDragInternal(i,t),r._isVertical()?(n.top<0&&(n.top=0),n.top>r._barback.height()&&(n.top=r._barback.height())):(n.left<0&&(n.left=0),n.left>r._barback.width()&&(n.left=r._barback.width())),r._multipleThumbs){var l,h;if(l=0===r._thumbIndex?e(r._thumbs[1]):e(r._thumbs[0]),r._isVertical()){var u=t.outerHeight()/2,o=r._barback.offsetParent().offset().top;h=l.offset().top+u-o}else{var _=t.outerWidth()/2,d=r._barback.offsetParent().offset().left;h=l.offset().left+_-d}0===r._thumbIndex?r._isVertical()?n.top<h&&(n.top=h):r._isRTL()?n.left<h&&(n.left=h):n.left>h&&(n.left=h):r._isVertical()?n.top>h&&(n.top=h):r._isRTL()?n.left>h&&(n.left=h):n.left<h&&(n.left=h)}},stop:function(e){this.style.width="",this.style.height="",r._mouseStop(e,t)}})},_makeDraggable:function(){this.options.disabled||(this._multipleThumbs?this._thumbs.toArray().forEach(function(t){var i=e(t);this._callDraggable(i)},this):this._callDraggable(this._thumb))},_disableDraggable:function(){this._multipleThumbs?this._thumbs.toArray().forEach(function(t){var i=e(t);i.is(".ui-draggable")&&i.draggable("disable")},this):this._thumb.is(".ui-draggable")&&this._thumb.draggable("disable")},_destroyDraggable:function(){this._multipleThumbs?this._thumbs.toArray().forEach(function(t){var i=e(t);i.is(".ui-draggable")&&i.draggable("destroy")},this):this._thumb.is(".ui-draggable")&&this._thumb.draggable("destroy")}}),i.extension._WIDGET_NAME="ojSlider",i.extension._INNER_ELEM="input",t.CustomElementBridge.register("oj-slider",{metadata:i})});