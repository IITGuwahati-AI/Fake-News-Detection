/**
 * @license
 * Copyright (c) 2014, 2019, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
define(["ojs/ojcore","jquery"],function(t,o){"use strict";t._TouchProxy=function(t){this._init(t)},t._TouchProxy.prototype._init=function(t){this._elem=t,this._touchHandled=!1,this._touchMoved=!1,this._touchStartHandler=o.proxy(this._touchStart,this),this._touchEndHandler=o.proxy(this._touchEnd,this),this._touchMoveHandler=o.proxy(this._touchMove,this),this._elem.on({touchstart:this._touchStartHandler,touchend:this._touchEndHandler,touchmove:this._touchMoveHandler,touchcancel:this._touchEndHandler})},t._TouchProxy.prototype._destroy=function(){this._elem&&this._touchStartHandler&&(this._elem.off({touchstart:this._touchStartHandler,touchmove:this._touchMoveHandler,touchend:this._touchEndHandler,touchcancel:this._touchEndHandler}),this._touchStartHandler=void 0,this._touchEndHandler=void 0,this._touchMoveHandler=void 0)},t._TouchProxy.prototype._touchHandler=function(t,o){if(!(t.originalEvent.touches.length>1)){"touchstart"!==t.type&&"touchend"!==t.type&&t.preventDefault();var h=t.originalEvent.changedTouches[0],e=document.createEvent("MouseEvent");e.initMouseEvent(o,!0,!0,window,1,h.screenX,h.screenY,h.clientX,h.clientY,!1,!1,!1,!1,0,null),h.target.dispatchEvent(e)}},t._TouchProxy.prototype._touchStart=function(t){this._touchHandled||(this._touchHandled=!0,this._touchMoved=!1,this._touchHandler(t,"mouseover"),this._touchHandler(t,"mousemove"),this._touchHandler(t,"mousedown"))},t._TouchProxy.prototype._touchMove=function(t){this._touchHandled&&(this._touchMoved=!0,this._touchHandler(t,"mousemove"))},t._TouchProxy.prototype._touchEnd=function(t){this._touchHandled&&(this._touchHandler(t,"mouseup"),this._touchHandler(t,"mouseout"),this._touchMoved||"touchend"!==t.type||this._touchHandler(t,"click"),this._touchHandled=!1)},t._TouchProxy._TOUCH_PROXY_KEY="_ojTouchProxy",t._TouchProxy.prototype.touchMoved=function(){return this._touchMoved},t._TouchProxy.addTouchListeners=function(h){var e=o(h),u=e.data(t._TouchProxy._TOUCH_PROXY_KEY);return u||(u=new t._TouchProxy(e),e.data(t._TouchProxy._TOUCH_PROXY_KEY,u)),u},t._TouchProxy.removeTouchListeners=function(h){var e=o(h),u=e.data(t._TouchProxy._TOUCH_PROXY_KEY);u&&(u._destroy(),e.removeData(t._TouchProxy._TOUCH_PROXY_KEY))}});