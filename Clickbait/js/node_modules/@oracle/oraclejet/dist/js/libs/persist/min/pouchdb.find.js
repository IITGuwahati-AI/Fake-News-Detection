!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.pouchdbFind=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){if(!a)return"undefined";switch(typeof a){case"function":return a.toString();case"string":return a.toString();default:return JSON.stringify(a)}}var e=a(4),f=a(5),g=f.Promise;b.exports=function(a){var b=a.db,c=a.viewName,h=a.map,i=a.reduce,j=a.temporary,k=a.pluginName,l=d(h)+d(i)+"undefined";if(!j&&b._cachedViews){var m=b._cachedViews[l];if(m)return g.resolve(m)}return b.info().then(function(a){function d(a){a.views=a.views||{};var b=c;b.indexOf("/")===-1&&(b=c+"/"+c);var d=a.views[b]=a.views[b]||{};if(!d[g])return d[g]=!0,a}var g=a.db_name+"-mrview-"+(j?"temp":f.MD5(l));return e(b,"_local/"+k,d).then(function(){return b.registerDependentDatabase(g).then(function(a){var c=a.db;c.auto_compaction=!0;var d={name:g,db:c,sourceDB:b,adapter:b.adapter,mapFun:h,reduceFun:i};return d.db.get("_local/lastSeq").catch(function(a){if(404!==a.status)throw a}).then(function(a){return d.seq=a?a.seq:0,j||(b._cachedViews=b._cachedViews||{},b._cachedViews[l]=d,d.db.on("destroyed",function(){delete b._cachedViews[l]})),d})})})})}},{4:4,5:5}],2:[function(a,b,c){(function(c){"use strict";function d(a){this.status=400,this.name="query_parse_error",this.message=a,this.error=!0;try{Error.captureStackTrace(this,d)}catch(a){}}function e(a){this.status=404,this.name="not_found",this.message=a,this.error=!0;try{Error.captureStackTrace(this,e)}catch(a){}}function f(a){return a.indexOf("/")===-1?[a,a]:a.split("/")}function g(a){return 1===a.length&&/^1-/.test(a[0].rev)}function h(a,b){var c=s(a.key,b.key);return 0!==c?c:s(a.value,b.value)}function i(a,b,c){return c=c||0,"number"==typeof b?a.slice(c,b+c):c>0?a.slice(c):a}function j(a){var b=a.value,c=b&&"object"==typeof b&&b._id||a.id;return c}function k(a,b){try{a.emit("error",b)}catch(a){console.error("The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),console.error(b)}}function l(a,b,c){try{return{output:b.apply(null,c)}}catch(b){return k(a,b),{error:b}}}function m(a,b){var c=a.descending?"endkey":"startkey",e=a.descending?"startkey":"endkey";if("undefined"!=typeof a[c]&&"undefined"!=typeof a[e]&&s(a[c],a[e])>0)throw new d("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(b.reduce&&a.reduce!==!1){if(a.include_docs)throw new d("{include_docs:true} is invalid for reduce");if(a.keys&&a.keys.length>1&&!a.group&&!a.group_level)throw new d("Multi-key fetches for reduce views must use {group: true}")}if(a.group_level){if("number"!=typeof a.group_level)throw new d('Invalid value for integer: "'+a.group_level+'"');if(a.group_level<0)throw new d('Invalid value for positive integer: "'+a.group_level+'"')}}function n(a){return function(b){if(404===b.status)return a;throw b}}function o(a){function b(a,b,c){function d(){return g(l)?x.resolve(i):b.db.get(h).catch(n(i))}function e(a){return a.keys.length?b.db.allDocs({keys:a.keys,include_docs:!0}):x.resolve({rows:[]})}function f(a,b){for(var c=[],d={},e=0,f=b.rows.length;e<f;e++){var g=b.rows[e],h=g.doc;if(h&&(c.push(h),d[h._id]=!0,h._deleted=!k[h._id],!h._deleted)){var i=k[h._id];"value"in i&&(h.value=i.value)}}var j=Object.keys(k);return j.forEach(function(a){if(!d[a]){var b={_id:a},e=k[a];"value"in e&&(b.value=e.value),c.push(b)}}),a.keys=w.uniq(j.concat(a.keys)),c.push(a),c}var h="_local/doc_"+a,i={_id:h,keys:[]},j=c[a],k=j.indexableKeysToKeyValues,l=j.changes;return d().then(function(a){return e(a).then(function(b){return f(a,b)})})}function d(a,c,d){var e="_local/lastSeq";return a.db.get(e).catch(n({_id:e,seq:0})).then(function(e){var f=Object.keys(c);return x.all(f.map(function(d){return b(d,a,c)})).then(function(b){var c=w.flatten(b);return e.seq=d,c.push(e),a.db.bulkDocs({docs:c})})})}function k(a){var b="string"==typeof a?a:a.name,c=y[b];return c||(c=y[b]=new r),c}function o(a){return w.sequentialize(k(a),function(){return p(a)})()}function p(a){function b(a,b){var c={id:f._id,key:u(a)};"undefined"!=typeof b&&null!==b&&(c.value=u(b)),e.push(c)}function c(b,c){return function(){return d(a,b,c)}}var e,f,g=H(a.mapFun,b),i=a.seq||0,j=new r;return new x(function(b,d){function k(){j.finish().then(function(){a.seq=i,b()})}function m(){function b(a){d(a)}a.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:i,limit:A}).on("complete",function(b){var d=b.results;if(!d.length)return k();for(var n={},o=0,p=d.length;o<p;o++){var q=d[o];if("_"!==q.doc._id[0]){e=[],f=q.doc,f._deleted||l(a.sourceDB,g,[f]),e.sort(h);for(var r,u={},v=0,w=e.length;v<w;v++){var x=e[v],y=[x.key,x.id];0===s(x.key,r)&&y.push(v);var z=t(y);u[z]=x,r=x.key}n[q.doc._id]={indexableKeysToKeyValues:u,changes:q.changes}}i=q.seq}return j.add(c(n,i)),d.length<A?k():m()}).on("error",b)}m()})}function B(a,b,c){0===c.group_level&&delete c.group_level;var d=c.group||c.group_level,e=I(a.reduceFun),f=[],g=c.group_level;b.forEach(function(a){var b=f[f.length-1],c=d?a.key:null;return d&&Array.isArray(c)&&"number"==typeof g&&(c=c.length>g?c.slice(0,g):c),b&&0===s(b.key[0][0],c)?(b.key.push([c,a.id]),void b.value.push(a.value)):void f.push({key:[[c,a.id]],value:[a.value]})});for(var h=0,j=f.length;h<j;h++){var k=f[h],m=l(a.sourceDB,e,[k.key,k.value,!1]);if(m.error&&/BuiltInError/.test(m.error.constructor))throw m.error;k.value=m.error?null:m.output,k.key=k.key[0][0]}return{rows:i(f,c.limit,c.skip)}}function C(a,b){return w.sequentialize(k(a),function(){return D(a,b)})()}function D(a,b){function c(b){return b.include_docs=!0,a.db.allDocs(b).then(function(a){return e=a.total_rows,a.rows.map(function(a){if("value"in a.doc&&"object"==typeof a.doc.value&&null!==a.doc.value){var b=Object.keys(a.doc.value).sort(),c=["id","key","value"];if(!(b<c||b>c))return a.doc.value}var d=q.parseIndexableString(a.doc._id);return{key:d[0],id:d[1],value:"value"in a.doc?a.doc.value:null}})})}function d(c){var d;if(d=f?B(a,c,b):{total_rows:e,offset:g,rows:c},b.include_docs){var h=w.uniq(c.map(j));return a.sourceDB.allDocs({keys:h,include_docs:!0,conflicts:b.conflicts,attachments:b.attachments,binary:b.binary}).then(function(a){var b={};return a.rows.forEach(function(a){a.doc&&(b["$"+a.id]=a.doc)}),c.forEach(function(a){var c=j(a),d=b["$"+c];d&&(a.doc=d)}),d})}return d}var e,f=a.reduceFun&&b.reduce!==!1,g=b.skip||0;"undefined"==typeof b.keys||b.keys.length||(b.limit=0,delete b.keys);var h=function(a){return a.reduce(function(a,b){return a.concat(b)})};if("undefined"!=typeof b.keys){var i=b.keys,k=i.map(function(a){var b={startkey:t([a]),endkey:t([a,{}])};return c(b)});return x.all(k).then(h).then(d)}var l={descending:b.descending};if("undefined"!=typeof b.startkey&&(l.startkey=t(b.descending?[b.startkey,{}]:[b.startkey])),"undefined"!=typeof b.endkey){var m=b.inclusive_end!==!1;b.descending&&(m=!m),l.endkey=t(m?[b.endkey,{}]:[b.endkey])}if("undefined"!=typeof b.key){var n=t([b.key]),o=t([b.key,{}]);l.descending?(l.endkey=n,l.startkey=o):(l.startkey=n,l.endkey=o)}return f||("number"==typeof b.limit&&(l.limit=b.limit),l.skip=g),c(l).then(d)}function E(a){return a.get("_local/"+G).then(function(b){var c={};Object.keys(b.views).forEach(function(a){var b=f(a),d="_design/"+b[0],e=b[1];c[d]=c[d]||{},c[d][e]=!0});var d={keys:Object.keys(c),include_docs:!0};return a.allDocs(d).then(function(d){var e={};d.rows.forEach(function(a){var d=a.key.substring(8);Object.keys(c[a.key]).forEach(function(c){var f=d+"/"+c;b.views[f]||(f=c);var g=Object.keys(b.views[f]),h=a.doc&&a.doc.views&&a.doc.views[c];g.forEach(function(a){e[a]=e[a]||h})})});var f=Object.keys(e).filter(function(a){return!e[a]}),g=f.map(function(b){return w.sequentialize(k(b),function(){return new a.constructor(b,a.__opts).destroy()})()});return x.all(g).then(function(){return{ok:!0}})})},n({ok:!0}))}function F(a,b,d){if("string"!=typeof b){m(d,b);var g={db:a,viewName:"temp_view/temp_view",map:b.map,reduce:b.reduce,temporary:!0,pluginName:G};return z.add(function(){return v(g).then(function(a){function b(){return a.db.destroy()}return w.fin(o(a).then(function(){return C(a,d)}),b)})}),z.finish()}var h=b,i=f(h),j=i[0],k=i[1];return a.get("_design/"+j).then(function(b){var f=b.views&&b.views[k];if(!f)throw new e("ddoc "+b._id+" has no view named "+k);J(b,k),m(d,f);var g={db:a,viewName:h,map:f.map,reduce:f.reduce,pluginName:G};return v(g).then(function(a){return"ok"===d.stale||"update_after"===d.stale?("update_after"===d.stale&&c.nextTick(function(){o(a)}),C(a,d)):o(a).then(function(){return C(a,d)})})})}var G=a.name,H=a.mapper,I=a.reducer,J=a.ddocValidator,K=function(a,b,c){var d=this;"function"==typeof b&&(c=b,b={}),b=w.extend(!0,{},b),"function"==typeof a&&(a={map:a});var e=x.resolve().then(function(){return F(d,a,b)});return w.promisedCallback(e,c),e},L=w.callbackify(function(){var a=this;return E(a)});return{query:K,viewCleanup:L}}var p,q=a(26),r=a(3),s=q.collate,t=q.toIndexableString,u=q.normalizeKey,v=a(1);p="undefined"!=typeof console&&"function"==typeof console.log?Function.prototype.bind.call(console.log,console):function(){};var w=a(5),x=w.Promise,y={},z=new r,A=50;w.inherits(d,Error),w.inherits(e,Error),b.exports=o}).call(this,a(34))},{1:1,26:26,3:3,34:34,5:5}],3:[function(a,b,c){"use strict";function d(){this.promise=new e(function(a){a()})}var e=a(5).Promise;d.prototype.add=function(a){return this.promise=this.promise.catch(function(){}).then(function(){return a()}),this.promise},d.prototype.finish=function(){return this.promise},b.exports=d},{5:5}],4:[function(a,b,c){"use strict";var d=a(31).upsert;b.exports=function(a,b,c){return d.apply(a,[b,c])}},{31:31}],5:[function(a,b,c){(function(b){"use strict";c.Promise=a(29),c.inherits=a(23),c.extend=a(28);var d=a(18);c.promisedCallback=function(a,c){return c&&a.then(function(a){b.nextTick(function(){c(null,a)})},function(a){b.nextTick(function(){c(a)})}),a},c.callbackify=function(a){return d(function(b){var d=b.pop(),e=a.apply(this,b);return"function"==typeof d&&c.promisedCallback(e,d),e})},c.fin=function(a,b){return a.then(function(a){var c=b();return"function"==typeof c.then?c.then(function(){return a}):a},function(a){var c=b();if("function"==typeof c.then)return c.then(function(){throw a});throw a})},c.sequentialize=function(a,b){return function(){var c=arguments,d=this;return a.add(function(){return b.apply(d,c)})}},c.flatten=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b=b.concat(a[c]);return b},c.uniq=function(a){for(var b={},c=0,d=a.length;c<d;c++)b["$"+a[c]]=!0;var e=Object.keys(b),f=new Array(e.length);for(c=0,d=e.length;c<d;c++)f[c]=e[c].substring(1);return f};var e=a(19),f=a(35);c.MD5=function(a){return b.browser?f.hash(a):e.createHash("md5").update(a).digest("hex")}}).call(this,a(34))},{18:18,19:19,23:23,28:28,29:29,34:34,35:35}],6:[function(a,b,c){"use strict";function d(a,b,c){b=h(b),a.request({method:"POST",url:"_index",body:b},c)}function e(a,b,c){a.request({method:"POST",url:"_find",body:b},c)}function f(a,b){a.request({method:"GET",url:"_index"},b)}function g(a,b,c){var d=b.ddoc,e=b.type||"json",f=b.name;if(!d)return c(new Error("you must provide an index's ddoc"));if(!f)return c(new Error("you must provide an index's name"));var g="_index/"+[d,e,f].map(encodeURIComponent).join("/");a.request({method:"DELETE",url:g},c)}var h=a(16);c.createIndex=d,c.find=e,c.getIndexes=f,c.deleteIndex=g},{16:16}],7:[function(a,b,c){"use strict";function d(a,b){return function(c){for(var d=[],e=0,f=a.length;e<f;e++){for(var g=o(a[e]),h=c,i=0,j=g.length;i<j;i++){var k=g[i];if(h=h[k],!h)break}d.push(h)}b(d)}}function e(a,b){var c=o(a);return function(a){for(var d=a,e=0,f=c.length;e<f;e++){var g=c[e];if(d=d[g],!d)return}b(d)}}function f(a,b){return function(c){b(c[a])}}function g(a,b){return function(c){for(var d=[],e=0,f=a.length;e<f;e++)d.push(c[a[e]]);b(d)}}function h(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];if(d.indexOf(".")!==-1)return!1}return!0}function i(a,b){var c=h(a),i=1===a.length;return c?i?f(a[0],b):g(a,b):i?e(a[0],b):d(a,b)}function j(a,b){var c=Object.keys(a.fields);return i(c,b)}function k(){throw new Error("reduce not supported")}function l(a,b){var c=a.views[b];if(!c.map||!c.map.fields)throw new Error("ddoc "+a._id+" with view "+b+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}var m=a(15),n=a(2),o=m.parseField,p=n({name:"indexes",mapper:j,reducer:k,ddocValidator:l});b.exports=p},{15:15,2:2}],8:[function(a,b,c){"use strict";function d(a,b,c){return h.upsert.call(a,b,c)}function e(a,b){function c(a){return a._rev&&"query"!==a.language&&(p=!0),a.language="query",a.views=a.views||{},!(q=!!a.views[j])&&(a.views[j]={map:{fields:f.mergeObjects(b.index.fields)},reduce:"_count",options:{def:e}},a)}b=m(b);var e=f.clone(b.index);b.index=l(b.index),k(b.index);var h=f.MD5(JSON.stringify(b)),j=b.name||"idx-"+h,n=b.ddoc||"idx-"+h,o="_design/"+n,p=!1,q=!1;return g("creating index",o),d(a,o,c).then(function(){if(p)throw new Error('invalid language for ddoc with id "'+o+'" (should be "query")')}).then(function(){var b=n+"/"+j;return i.query.call(a,b,{limit:0,reduce:!1}).then(function(){return{id:o,name:j,result:q?"exists":"created"}})})}var f=a(17),g=f.log,h=a(31),i=a(7),j=a(15),k=j.validateIndex,l=j.massageIndexDef,m=a(16);b.exports=e},{15:15,16:16,17:17,31:31,7:7}],9:[function(a,b,c){"use strict";function d(a,b){function c(a){return 1===Object.keys(a.views).length&&a.views[g]?{_id:d,_deleted:!0}:(delete a.views[g],a)}if(!b.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!b.name)throw new Error("you must supply an index.name when deleting");var d=b.ddoc,g=b.name;return f(a,d,c).then(function(){return e.viewCleanup.apply(a)}).then(function(){return{ok:!0}})}var e=a(7),f=a(4);b.exports=d},{4:4,7:7}],10:[function(a,b,c){"use strict";function d(a){function b(b){return a.map(function(a){var c=v(a),d=x(c),e=z(b,d);return e})}return function(a,c){var d=b(a.doc),e=b(c.doc),f=s(d,e);return 0!==f?f:y.compare(a.doc._id,c.doc._id)}}function e(a,b,c){if(a=a.filter(function(a){return f(a.doc,b.selector,c)}),b.sort){var e=d(b.sort);a=a.sort(e),"string"!=typeof b.sort[0]&&"desc"===w(b.sort[0])&&(a=a.reverse())}if("limit"in b||"skip"in b){var g=b.skip||0,h=("limit"in b?b.limit:a.length)+g;a=a.slice(g,h)}return a}function f(a,b,c){return c.every(function(c){var d=b[c],e=x(c),f=z(a,e);return u(c)?h(c,d,a):g(d,a,e,f)})}function g(a,b,c,d){return!a||Object.keys(a).every(function(e){var f=a[e];return i(e,b,f,c,d)})}function h(a,b,c){return"$or"===a?b.some(function(a){return f(c,a,Object.keys(a))}):"$not"===a?!f(c,b,Object.keys(b)):!b.find(function(a){return f(c,a,Object.keys(a))})}function i(a,b,c,d,e){if(!A[a])throw new Error('unknown operator "'+a+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type or $all');return A[a](b,c,d,e)}function j(a){return"undefined"!=typeof a&&null!==a}function k(a){return"undefined"!=typeof a}function l(a,b){var c=b[0],d=b[1];if(0===c)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(c,10)!==c)throw new Error("Divisor is not an integer");if(parseInt(d,10)!==d)throw new Error("Modulus is not an integer");return parseInt(a,10)===a&&a%c===d}function m(a,b){return b.some(function(b){return a instanceof Array?a.indexOf(b)>-1:a===b})}function n(a,b){return b.every(function(b){return a.indexOf(b)>-1})}function o(a,b){return a.length===b}function p(a,b){var c=new RegExp(b);return c.test(a)}function q(a,b){switch(b){case"null":return null===a;case"boolean":return"boolean"==typeof a;case"number":return"number"==typeof a;case"string":return"string"==typeof a;case"array":return a instanceof Array;case"object":return"[object Object]"==={}.toString.call(a)}throw new Error(b+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}var r=a(24),s=a(26).collate,t=a(15),u=t.isCombinationalField,v=t.getKey,w=t.getValue,x=t.parseField,y=a(17),z=y.getFieldFromDoc,A={$elemMatch:function(a,b,c,d){return!!r(d)&&(0!==d.length&&("object"==typeof d[0]?d.some(function(a){return f(a,b,Object.keys(b))}):d.some(function(d){return g(b,a,c,d)})))},$eq:function(a,b,c,d){return k(d)&&0===s(d,b)},$gte:function(a,b,c,d){return k(d)&&s(d,b)>=0},$gt:function(a,b,c,d){return k(d)&&s(d,b)>0},$lte:function(a,b,c,d){return k(d)&&s(d,b)<=0},$lt:function(a,b,c,d){return k(d)&&s(d,b)<0},$exists:function(a,b,c,d){return b?k(d):!k(d)},$mod:function(a,b,c,d){return j(d)&&l(d,b)},$ne:function(a,b,c,d){return b.every(function(a){return 0!==s(d,a)})},$in:function(a,b,c,d){return j(d)&&m(d,b)},$nin:function(a,b,c,d){return j(d)&&!m(d,b)},$size:function(a,b,c,d){return j(d)&&o(d,b)},$all:function(a,b,c,d){return r(d)&&n(d,b)},$regex:function(a,b,c,d){return j(d)&&p(d,b)},$type:function(a,b,c,d){return q(d,b)}};b.exports=e},{15:15,17:17,24:24,26:26}],11:[function(a,b,c){"use strict";function d(a){return a.ddoc.substring(8)+"/"+a.name}function e(a,b){var c=h(b);return c.descending?("endkey"in c&&"string"!=typeof c.endkey&&(c.endkey=""),"startkey"in c&&"string"!=typeof c.startkey&&(c.limit=0)):("startkey"in c&&"string"!=typeof c.startkey&&(c.startkey=""),"endkey"in c&&"string"!=typeof c.endkey&&(c.limit=0)),"key"in c&&"string"!=typeof c.key&&(c.limit=0),a.allDocs(c)}function f(a,b){return b.selector&&(b.selector=o(b.selector)),b.sort&&(b.sort=p(b.sort)),r(b),i(a).then(function(c){var f=l(b,c.indexes),h=f.index;s(b,h);var i=g.extend(!0,{include_docs:!0,reduce:!1},f.queryOpts);if("startkey"in i&&"endkey"in i&&j(i.startkey,i.endkey)>0)return{docs:[]};var m=b.sort&&"string"!=typeof b.sort[0]&&"desc"===q(b.sort[0]);return m&&(i.descending=!0,i=t(i)),f.inMemoryFields.length||("limit"in b&&(i.limit=b.limit),"skip"in b&&(i.skip=b.skip)),v.resolve().then(function(){if("_all_docs"===h.name)return e(a,i);var b=d(h);return k.query.call(a,b,i)}).then(function(a){i.inclusive_start===!1&&(a.rows=u(a.rows,i.startkey,h)),f.inMemoryFields.length&&(a.rows=n(a.rows,b,f.inMemoryFields));var c={docs:a.rows.map(function(a){var c=a.doc;return b.fields?g.pick(c,b.fields):c})};return h.defaultUsed&&(c.warning="no matching index found, create an index to optimize query time"),c})})}var g=a(17),h=g.clone,i=a(13),j=a(26).collate,k=a(7),l=a(12),m=a(15),n=a(10),o=m.massageSelector,p=m.massageSort,q=m.getValue,r=m.validateFindRequest,s=m.validateSort,t=m.reverseOptions,u=m.filterInclusiveStart,v=g.Promise;b.exports=f},{10:10,12:12,13:13,15:15,17:17,26:26,7:7}],12:[function(a,b,c){"use strict";function d(a,b){for(var c=a.def.fields.map(z),d=0,e=c.length;d<e;d++){var f=c[d];if(b===f)return!0}return!1}function e(a,b){var c=a[b],d=z(c);return"$eq"!==d}function f(a,b){var c=b.def.fields.map(z);return a.slice().sort(function(a,b){var d=c.indexOf(a),e=c.indexOf(b);return d===-1&&(d=Number.MAX_VALUE),e===-1&&(e=Number.MAX_VALUE),w.compare(d,e)})}function g(a,b,c){c=f(c,a);for(var g=!1,h=0,i=c.length;h<i;h++){var j=c[h];if(g||!d(a,j))return c.slice(h);h<i-1&&e(b,j)&&(g=!0)}return[]}function h(a){var b=[];return Object.keys(a).forEach(function(c){var d=a[c];Object.keys(d).forEach(function(a){"$ne"===a&&b.push(c)})}),b}function i(a,b,c,d){var e=w.flatten(a,g(b,c,d),h(c));return f(w.uniq(e),b)}function j(a,b,c){if(b){var d=w.oneArrayIsStrictSubArrayOfOther(b,a),e=w.oneArrayIsSubArrayOfOther(c,a);return d&&e}return w.oneSetIsSubArrayOfOther(c,a)}function k(a){return D.indexOf(a)===-1}function l(a,b){var c=a[0],d=b[c],e=Object.keys(d).some(function(a){return!k(a)});if(!e)return!1;var f=1===Object.keys(d).length&&"$ne"===z(d);return!f}function m(a,b,c,d){var e=a.def.fields.map(z),f=j(e,b,c);return!!f&&l(e,d)}function n(a,b,c,d){return d.reduce(function(d,e){var f=m(e,c,b,a);return f&&d.push(e),d},[])}function o(a,b,c,d){function e(a){for(var b=a.def.fields.map(z),c=0,d=0,e=b.length;d<e;d++){var f=b[d];h[f]&&c++}return c}var f=n(a,b,c,d);if(0===f.length){var g=d[0];return g.defaultUsed=!0,g}if(1===f.length)return f[0];var h=w.arrayToObject(b);return w.max(f,e)}function p(a,b){switch(a){case"$eq":return{key:b};case"$lte":return{endkey:b};case"$gte":return{startkey:b};case"$lt":return{endkey:b,inclusive_end:!1};case"$gt":return{startkey:b,inclusive_start:!1}}}function q(a,b){var c,d=z(b.def.fields[0]),e=a[d],f=[],g=Object.keys(e);return g.forEach(function(a){if(k(a))return void f.push(d);var b=e[a],g=p(a,b);c=c?w.mergeObjects([c,g]):g}),{queryOpts:c,inMemoryFields:f}}function r(a,b){switch(a){case"$eq":return{startkey:b,endkey:b};case"$lte":return{endkey:b};case"$gte":return{startkey:b};case"$lt":return{endkey:b,inclusive_end:!1};case"$gt":return{startkey:b,inclusive_start:!1}}}function s(a,b){function c(a){d!==!1&&h.push(B),e!==!1&&i.push(C),g=f.slice(a)}for(var d,e,f=b.def.fields.map(z),g=[],h=[],i=[],j=0,k=f.length;j<k;j++){var l=f[j],m=a[l];if(!m){c(j);break}if(j>0){if("$ne"in m){c(j);break}var n="$gt"in m||"$gte"in m||"$lt"in m||"$lte"in m,o=Object.keys(a[f[j-1]]),p=w.arrayEquals(o,["$eq"]),q=w.arrayEquals(o,Object.keys(m)),s=n&&!p&&!q;if(s){c(j);break}}for(var t=Object.keys(m),u=null,v=0;v<t.length;v++){var x=t[v],y=m[x],A=r(x,y);u=u?w.mergeObjects([u,A]):A}h.push("startkey"in u?u.startkey:B),i.push("endkey"in u?u.endkey:C),"inclusive_start"in u&&(d=u.inclusive_start),"inclusive_end"in u&&(e=u.inclusive_end)}var D={startkey:h,endkey:i};return"undefined"!=typeof d&&(D.inclusive_start=d),"undefined"!=typeof e&&(D.inclusive_end=e),{queryOpts:D,inMemoryFields:g}}function t(){return{queryOpts:{startkey:null},inMemoryFields:[]}}function u(a,b){return b.defaultUsed?t(a,b):1===b.def.fields.length?q(a,b):s(a,b)}function v(a,b){x("planning query",a);var c=a.selector,d=a.sort,e=A(c,d),f=e.fields,g=e.sortOrder,h=o(c,f,g,b),j=u(c,h),k=j.queryOpts,l=j.inMemoryFields,m=i(l,h,c,f),n={queryOpts:k,index:h,inMemoryFields:m};return x("query plan",n),n}var w=a(17),x=w.log,y=a(15),z=y.getKey,A=y.getUserFields,B=null,C={"￿":{}},D=["$eq","$gt","$gte","$lt","$lte"];b.exports=v},{15:15,17:17}],13:[function(a,b,c){"use strict";function d(a){return a.allDocs({startkey:"_design/",endkey:"_design/￿",include_docs:!0}).then(function(a){var b={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return b.indexes=e.flatten(b.indexes,a.rows.filter(function(a){return"query"===a.doc.language}).map(function(a){var b=void 0!==a.doc.views?Object.keys(a.doc.views):[];return b.map(function(b){var c=a.doc.views[b];return{ddoc:a.id,name:b,type:"json",def:g(c.options.def)}})})),b.indexes.sort(function(a,b){return e.compare(a.name,b.name)}),b.total_rows=b.indexes.length,b})}var e=a(17),f=a(15),g=f.massageIndexDef;b.exports=d},{15:15,17:17}],14:[function(a,b,c){"use strict";var d=a(17),e=d.callbackify;c.createIndex=e(a(8)),c.find=e(a(11)),c.getIndexes=e(a(13)),c.deleteIndex=e(a(9))},{11:11,13:13,17:17,8:8,9:9}],15:[function(a,b,c){"use strict";function d(a){return Object.keys(a)[0]}function e(a){return a[d(a)]}function f(a){if(!Array.isArray(a))throw new Error("invalid sort json - should be an array");return a.map(function(a){if("string"==typeof a){var b={};return b[a]="asc",b}return a})}function g(a){return x.indexOf(a)>-1}function h(a,b,c){"undefined"==typeof c.$eq&&("undefined"!=typeof c.$gte?"$gte"===a?b>c.$gte&&(c.$gte=b):b>=c.$gte&&(delete c.$gte,c.$gt=b):"undefined"!=typeof c.$gt?"$gte"===a?b>c.$gt&&(delete c.$gt,c.$gte=b):b>c.$gt&&(c.$gt=b):c[a]=b)}function i(a,b,c){"undefined"==typeof c.$eq&&("undefined"!=typeof c.$lte?"$lte"===a?b<c.$lte&&(c.$lte=b):b<=c.$lte&&(delete c.$lte,c.$lt=b):"undefined"!=typeof c.$lt?"$lte"===a?b<c.$lt&&(delete c.$lt,c.$lte=b):b<c.$lt&&(c.$lt=b):c[a]=b)}function j(a,b){"$ne"in b?b.$ne.push(a):b.$ne=[a]}function k(a,b){delete b.$gt,delete b.$gte,delete b.$lt,delete b.$lte,delete b.$ne,b.$eq=a}function l(a){var b={};return a.forEach(function(a){Object.keys(a).forEach(function(c){var d=a[c];if("object"!=typeof d&&(d={$eq:d}),g(c))d instanceof Array?b[c]=d.map(function(a){return l([a])}):b[c]=l([d]);else{var e=b[c]=b[c]||{};Object.keys(d).forEach(function(a){var b=d[a];return"$gt"===a||"$gte"===a?h(a,b,e):"$lt"===a||"$lte"===a?i(a,b,e):"$ne"===a?j(b,e):"$eq"===a?k(b,e):void(e[a]=b)})}})}),b}function m(a){var b=v.clone(a),c=!1;"$and"in b&&(b=l(b.$and),c=!0),"$not"in b&&(b.$not=l([b.$not]));for(var d=Object.keys(b),e=0;e<d.length;e++){var f=d[e],g=b[f];"object"!=typeof g||null===g?g={$eq:g}:"$ne"in g&&!c&&(g.$ne=[g.$ne]),b[f]=g}return b}function n(a){return a.fields=a.fields.map(function(a){if("string"==typeof a){var b={};return b[a]="asc",b}return a}),a}function o(a,b){for(var c=[],e=0;e<b.def.fields.length;e++){var f=d(b.def.fields[e]);c.push(a[f])}return c}function p(a,b,c){for(var d=c.def.fields,e=0,f=a.length;e<f;e++){var g=a[e],h=o(g.doc,c);if(1===d.length)h=h[0];else for(;h.length>b.length;)h.pop();if(Math.abs(w.collate(h,b))>0)break}return e>0?a.slice(e):a}function q(a){var b=v.clone(a);return delete b.startkey,delete b.endkey,delete b.inclusive_start,delete b.inclusive_end,"endkey"in a&&(b.startkey=a.endkey),"startkey"in a&&(b.endkey=a.startkey),"inclusive_start"in a&&(b.inclusive_end=a.inclusive_start),"inclusive_end"in a&&(b.inclusive_start=a.inclusive_end),b}function r(a){var b=a.fields.filter(function(a){return"asc"===e(a)});if(0!==b.length&&b.length!==a.fields.length)throw new Error("unsupported mixed sorting")}function s(a,b){if(b.defaultUsed&&a.sort){var c=a.sort.filter(function(a){return"_id"!==Object.keys(a)[0]}).map(function(a){return Object.keys(a)[0]});if(c.length>0)throw new Error('Cannot sort on field(s) "'+c.join(",")+'" when using the default index')}b.defaultUsed}function t(a){if("object"!=typeof a.selector)throw new Error("you must provide a selector when you find()")}function u(a,b){var c,e=Object.keys(a),f=b?b.map(d):[];return c=e.length>=f.length?e:f,0===f.length?{fields:c}:(c=c.sort(function(a,b){var c=f.indexOf(a);c===-1&&(c=Number.MAX_VALUE);var d=f.indexOf(b);return d===-1&&(d=Number.MAX_VALUE),c<d?-1:c>d?1:0}),{fields:c,sortOrder:b.map(d)})}var v=a(17),w=a(26),x=["$or","$nor","$not"];b.exports={getKey:d,getValue:e,massageSort:f,massageSelector:m,validateIndex:r,validateFindRequest:t,validateSort:s,reverseOptions:q,filterInclusiveStart:p,massageIndexDef:n,parseField:v.parseField,getUserFields:u,isCombinationalField:g}},{17:17,26:26}],16:[function(a,b,c){"use strict";var d=a(17),e=d.clone;b.exports=function(a){return a=e(a),a.index||(a.index={}),["type","name","ddoc"].forEach(function(b){a.index[b]&&(a[b]=a.index[b],delete a.index[b])}),a.fields&&(a.index.fields=a.fields,delete a.fields),a.type||(a.type="json"),a}},{17:17}],17:[function(a,b,c){(function(b){"use strict";var d=a(29);c.once=function(a){var b=!1;return c.getArguments(function(c){if(b)throw console.trace(),new Error("once called  more than once");b=!0,a.apply(this,c)})},c.getArguments=function(a){return function(){for(var b=arguments.length,c=new Array(b),d=-1;++d<b;)c[d]=arguments[d];return a.call(this,c)}},c.toPromise=function(a){return c.getArguments(function(e){var f,g=this,h="function"==typeof e[e.length-1]&&e.pop();h&&(f=function(a,c){b.nextTick(function(){h(a,c)})});var i=new d(function(b,d){try{var f=c.once(function(a,c){a?d(a):b(c)});e.push(f),a.apply(g,e)}catch(a){d(a)}});return f&&i.then(function(a){f(null,a)},f),i.cancel=function(){return this},i})},c.inherits=a(23),c.Promise=d,c.clone=function(a){return c.extend(!0,{},a)},c.extend=a(28),c.callbackify=function(a){return c.getArguments(function(b){var d=b.pop(),e=a.apply(this,b);return c.promisedCallback(e,d),e})},c.promisedCallback=function(a,c){return a.then(function(a){b.nextTick(function(){c(null,a)})},function(a){b.nextTick(function(){c(a)})}),a};var e=a(19),f=a(35);c.MD5=function(a){return b.browser?f.hash(a):e.createHash("md5").update(a).digest("hex")},c.flatten=c.getArguments(function(a){for(var b=[],d=0,e=a.length;d<e;d++){var f=a[d];Array.isArray(f)?b=b.concat(c.flatten.apply(null,f)):b.push(f)}return b}),c.mergeObjects=function(a){for(var b={},d=0,e=a.length;d<e;d++)b=c.extend(!0,b,a[d]);return b},c.getFieldFromDoc=function(a,b){for(var c=a,d=0,e=b.length;d<e;d++){var f=b[d];if(c=c[f],!c)break}return c},c.setFieldInDoc=function(a,b,c){for(var d=0,e=b.length;d<e-1;d++){var f=b[d];a=a[f]={}}a[b[e-1]]=c},c.parseField=function(a){for(var b=[],c="",d=0,e=a.length;d<e;d++){var f=a[d];"."===f?d>0&&"\\"===a[d-1]?c=c.substring(0,c.length-1)+".":(b.push(c),c=""):c+=f}return b.push(c),b},c.pick=function(a,b){for(var d={},e=0,f=b.length;e<f;e++){var g=c.parseField(b[e]),h=c.getFieldFromDoc(a,g);"undefined"!=typeof h&&c.setFieldInDoc(d,g,h)}return d},c.oneArrayIsSubArrayOfOther=function(a,b){for(var c=0,d=Math.min(a.length,b.length);c<d;c++)if(a[c]!==b[c])return!1;return!0},c.oneArrayIsStrictSubArrayOfOther=function(a,b){return!(a.length>b.length)&&c.oneArrayIsSubArrayOfOther(a,b)},c.oneSetIsSubArrayOfOther=function(a,b){a=a.slice();for(var c=0,d=b.length;c<d;c++){var e=b[c];if(!a.length)break;var f=a.indexOf(e);if(f===-1)return!1;a.splice(f,1)}return!0},c.compare=function(a,b){return a<b?-1:a>b?1:0},c.arrayToObject=function(a){for(var b={},c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b},c.max=function(a,b){for(var c=null,d=-1,e=0,f=a.length;e<f;e++){var g=a[e],h=b(g);h>d&&(d=h,c=g)}return c},c.arrayEquals=function(a,b){if(a.length!==b.length)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0},c.uniq=function(a){for(var b={},c=0;c<a.length;c++)b["$"+a[c]]=!0;return Object.keys(b).map(function(a){return a.substring(1)})},c.log=a(20)("pouchdb:find")}).call(this,a(34))},{19:19,20:20,23:23,28:28,29:29,34:34,35:35}],18:[function(a,b,c){"use strict";function d(a){return function(){var b=arguments.length;if(b){for(var c=[],d=-1;++d<b;)c[d]=arguments[d];return a.call(this,c)}return a.call(this,[])}}b.exports=d},{}],19:[function(a,b,c){},{}],20:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(a){}}function h(){var a;try{a=c.storage.debug}catch(a){}return a}function i(){try{return window.localStorage}catch(a){}}c=b.exports=a(21),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{21:21}],21:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);
g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;e<d;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a(25),c.names=[],c.skips=[],c.formatters={};var j,k=0},{25:25}],22:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],24:[function(a,b,c){var d=Array.isArray,e=Object.prototype.toString;b.exports=d||function(a){return!!a&&"[object Array]"==e.call(a)}},{}],25:[function(a,b,c){function d(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b.long?f(a):e(a)}},{}],26:[function(a,b,c){"use strict";function d(a){if(null!==a)switch(typeof a){case"boolean":return a?1:0;case"number":return k(a);case"string":return a.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var b=Array.isArray(a),d=b?a:Object.keys(a),e=-1,f=d.length,g="";if(b)for(;++e<f;)g+=c.toIndexableString(d[e]);else for(;++e<f;){var h=d[e];g+=c.toIndexableString(h)+c.toIndexableString(a[h])}return g}return""}function e(a,b){var c,d=b,e="1"===a[b];if(e)c=0,b++;else{var f="0"===a[b];b++;var g="",h=a.substring(b,b+m),i=parseInt(h,10)+l;for(f&&(i=-i),b+=m;;){var j=a[b];if("\0"===j)break;g+=j,b++}g=g.split("."),c=1===g.length?parseInt(g,10):parseFloat(g[0]+"."+g[1]),f&&(c-=10),0!==i&&(c=parseFloat(c+"e"+i))}return{num:c,length:b-d}}function f(a,b){var c=a.pop();if(b.length){var d=b[b.length-1];c===d.element&&(b.pop(),d=b[b.length-1]);var e=d.element,f=d.index;if(Array.isArray(e))e.push(c);else if(f===a.length-2){var g=a.pop();e[g]=c}else a.push(c)}}function g(a,b){for(var d=Math.min(a.length,b.length),e=0;e<d;e++){var f=c.collate(a[e],b[e]);if(0!==f)return f}return a.length===b.length?0:a.length>b.length?1:-1}function h(a,b){return a===b?0:a>b?1:-1}function i(a,b){for(var d=Object.keys(a),e=Object.keys(b),f=Math.min(d.length,e.length),g=0;g<f;g++){var h=c.collate(d[g],e[g]);if(0!==h)return h;if(h=c.collate(a[d[g]],b[e[g]]),0!==h)return h}return d.length===e.length?0:d.length>e.length?1:-1}function j(a){var b=["boolean","number","string","object"],c=b.indexOf(typeof a);return~c?null===a?1:Array.isArray(a)?5:c<3?c+2:c+3:Array.isArray(a)?5:void 0}function k(a){if(0===a)return"1";var b=a.toExponential().split(/e\+?/),c=parseInt(b[1],10),d=a<0,e=d?"0":"2",f=(d?-c:c)-l,g=o.padLeft(f.toString(),"0",m);e+=n+g;var h=Math.abs(parseFloat(b[0]));d&&(h=10-h);var i=h.toFixed(20);return i=i.replace(/\.?0+$/,""),e+=n+i}var l=-324,m=3,n="",o=a(27);c.collate=function(a,b){if(a===b)return 0;a=c.normalizeKey(a),b=c.normalizeKey(b);var d=j(a),e=j(b);if(d-e!==0)return d-e;if(null===a)return 0;switch(typeof a){case"number":return a-b;case"boolean":return a===b?0:a<b?-1:1;case"string":return h(a,b)}return Array.isArray(a)?g(a,b):i(a,b)},c.normalizeKey=function(a){switch(typeof a){case"undefined":return null;case"number":return a===1/0||a===-(1/0)||isNaN(a)?null:a;case"object":var b=a;if(Array.isArray(a)){var d=a.length;a=new Array(d);for(var e=0;e<d;e++)a[e]=c.normalizeKey(b[e])}else{if(a instanceof Date)return a.toJSON();if(null!==a){a={};for(var f in b)if(b.hasOwnProperty(f)){var g=b[f];"undefined"!=typeof g&&(a[f]=c.normalizeKey(g))}}}}return a},c.toIndexableString=function(a){var b="\0";return a=c.normalizeKey(a),j(a)+n+d(a)+b},c.parseIndexableString=function(a){for(var b=[],c=[],d=0;;){var g=a[d++];if("\0"!==g)switch(g){case"1":b.push(null);break;case"2":b.push("1"===a[d]),d++;break;case"3":var h=e(a,d);b.push(h.num),d+=h.length;break;case"4":for(var i="";;){var j=a[d];if("\0"===j)break;i+=j,d++}i=i.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),b.push(i);break;case"5":var k={element:[],index:b.length};b.push(k.element),c.push(k);break;case"6":var l={element:{},index:b.length};b.push(l.element),c.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+g)}else{if(1===b.length)return b.pop();f(b,c)}}}},{27:27}],27:[function(a,b,c){"use strict";function d(a,b,c){for(var d="",e=c-a.length;d.length<e;)d+=b;return d}c.padLeft=function(a,b,c){var e=d(a,b,c);return e+a},c.padRight=function(a,b,c){var e=d(a,b,c);return a+e},c.stringLexCompare=function(a,b){var c,d=a.length,e=b.length;for(c=0;c<d;c++){if(c===e)return 1;var f=a.charAt(c),g=b.charAt(c);if(f!==g)return f<g?-1:1}return d<e?-1:0},c.intToDecimalForm=function(a){var b=a<0,c="";do{var d=b?-Math.ceil(a%10):Math.floor(a%10);c=d+c,a=b?Math.ceil(a/10):Math.floor(a/10)}while(a);return b&&"0"!==c&&(c="-"+c),c}},{}],28:[function(a,b,c){"use strict";function d(a){return null===a?String(a):"object"==typeof a||"function"==typeof a?j[n.call(a)]||"object":typeof a}function e(a){return null!==a&&a===a.window}function f(a){if(!a||"object"!==d(a)||a.nodeType||e(a))return!1;try{if(a.constructor&&!o.call(a,"constructor")&&!o.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}var b;for(b in a);return void 0===b||o.call(a,b)}function g(a){return"function"===d(a)}function h(){for(var a=[],b=-1,c=arguments.length,d=new Array(c);++b<c;)d[b]=arguments[b];var e={};a.push({args:d,result:{container:e,key:"key"}});for(var f;f=a.pop();)i(a,f.args,f.result);return e.key}function i(a,b,c){var d,e,h,i,j,k,l,m=b[0]||{},n=1,o=b.length,q=!1,r=/\d+/;for("boolean"==typeof m&&(q=m,m=b[1]||{},n=2),"object"==typeof m||g(m)||(m={}),o===n&&(m=this,--n);n<o;n++)if(null!=(d=b[n])){l=p(d);for(e in d)if(!(e in Object.prototype)){if(l&&!r.test(e))continue;if(h=m[e],i=d[e],m===i)continue;q&&i&&(f(i)||(j=p(i)))?(j?(j=!1,k=h&&p(h)?h:[]):k=h&&f(h)?h:{},a.push({args:[q,k,i],result:{container:m,key:e}})):void 0!==i&&(p(d)&&g(i)||(m[e]=i))}}c.container[c.key]=m}for(var j={},k=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],l=0;l<k.length;l++){var m=k[l];j["[object "+m+"]"]=m.toLowerCase()}var n=j.toString,o=j.hasOwnProperty,p=Array.isArray||function(a){return"array"===d(a)};b.exports=h},{}],29:[function(a,b,c){"use strict";function d(a){return a&&"object"==typeof a&&"default"in a?a.default:a}var e=d(a(30)),f="function"==typeof Promise?Promise:e;b.exports=f},{30:30}],30:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(b){return p.reject(a,b)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&"object"==typeof a&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a(22),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=e,e.prototype.catch=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){var e=this.state===r?a:b;g(c,e,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},e.resolve=k,e.reject=l,e.all=m,e.race=n},{22:22}],31:[function(a,b,c){"use strict";function d(a,b,c){return"string"!=typeof b?f.reject(new Error("doc id is required")):a.get(b).catch(function(a){if(404!==a.status)throw a;return{}}).then(function(d){var f=d._rev,g=c(d);return g?(g._id=b,g._rev=f,e(a,g,c)):{updated:!1,rev:f}})}function e(a,b,c){return a.put(b).then(function(a){return{updated:!0,rev:a.rev}},function(e){if(409!==e.status)throw e;return d(a,b._id,c)})}var f=a(33);c.upsert=function(a,b,c){var e=this,f=d(e,a,b);return"function"!=typeof c?f:void f.then(function(a){c(null,a)},c)},c.putIfNotExists=function(a,b,c){var e=this;"string"!=typeof a&&(c=b,b=a,a=b._id);var f=function(a){return!a._rev&&b},g=d(e,a,f);return"function"!=typeof c?g:void g.then(function(a){c(null,a)},c)},"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(c)},{33:33}],32:[function(a,b,c){arguments[4][30][0].apply(c,arguments)},{22:22,30:30}],33:[function(a,b,c){arguments[4][29][0].apply(c,arguments)},{29:29,32:32}],34:[function(a,b,c){function d(){k&&h&&(k=!1,h.length?j=h.concat(j):l=-1,j.length&&e())}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],35:[function(b,c,d){!function(b){if("object"==typeof d)c.exports=b();else if("function"==typeof a&&a.amd)a(b);else{var e;try{e=window}catch(a){e=self}e.SparkMD5=b()}}(function(a){"use strict";var b=function(a,b){return a+b&4294967295},c=function(a,c,d,e,f,g){return c=b(b(c,a),b(e,g)),b(c<<f|c>>>32-f,d)},d=function(a,b,d,e,f,g,h){return c(b&d|~b&e,a,b,f,g,h)},e=function(a,b,d,e,f,g,h){return c(b&e|d&~e,a,b,f,g,h)},f=function(a,b,d,e,f,g,h){return c(b^d^e,a,b,f,g,h)},g=function(a,b,d,e,f,g,h){return c(d^(b|~e),a,b,f,g,h)},h=function(a,c){var h=a[0],i=a[1],j=a[2],k=a[3];h=d(h,i,j,k,c[0],7,-680876936),k=d(k,h,i,j,c[1],12,-389564586),j=d(j,k,h,i,c[2],17,606105819),i=d(i,j,k,h,c[3],22,-1044525330),h=d(h,i,j,k,c[4],7,-176418897),k=d(k,h,i,j,c[5],12,1200080426),j=d(j,k,h,i,c[6],17,-1473231341),i=d(i,j,k,h,c[7],22,-45705983),h=d(h,i,j,k,c[8],7,1770035416),k=d(k,h,i,j,c[9],12,-1958414417),j=d(j,k,h,i,c[10],17,-42063),i=d(i,j,k,h,c[11],22,-1990404162),h=d(h,i,j,k,c[12],7,1804603682),k=d(k,h,i,j,c[13],12,-40341101),j=d(j,k,h,i,c[14],17,-1502002290),i=d(i,j,k,h,c[15],22,1236535329),h=e(h,i,j,k,c[1],5,-165796510),k=e(k,h,i,j,c[6],9,-1069501632),j=e(j,k,h,i,c[11],14,643717713),i=e(i,j,k,h,c[0],20,-373897302),h=e(h,i,j,k,c[5],5,-701558691),k=e(k,h,i,j,c[10],9,38016083),j=e(j,k,h,i,c[15],14,-660478335),i=e(i,j,k,h,c[4],20,-405537848),h=e(h,i,j,k,c[9],5,568446438),k=e(k,h,i,j,c[14],9,-1019803690),j=e(j,k,h,i,c[3],14,-187363961),i=e(i,j,k,h,c[8],20,1163531501),h=e(h,i,j,k,c[13],5,-1444681467),k=e(k,h,i,j,c[2],9,-51403784),j=e(j,k,h,i,c[7],14,1735328473),i=e(i,j,k,h,c[12],20,-1926607734),h=f(h,i,j,k,c[5],4,-378558),k=f(k,h,i,j,c[8],11,-2022574463),j=f(j,k,h,i,c[11],16,1839030562),i=f(i,j,k,h,c[14],23,-35309556),h=f(h,i,j,k,c[1],4,-1530992060),k=f(k,h,i,j,c[4],11,1272893353),j=f(j,k,h,i,c[7],16,-155497632),i=f(i,j,k,h,c[10],23,-1094730640),h=f(h,i,j,k,c[13],4,681279174),k=f(k,h,i,j,c[0],11,-358537222),j=f(j,k,h,i,c[3],16,-722521979),i=f(i,j,k,h,c[6],23,76029189),h=f(h,i,j,k,c[9],4,-640364487),k=f(k,h,i,j,c[12],11,-421815835),j=f(j,k,h,i,c[15],16,530742520),i=f(i,j,k,h,c[2],23,-995338651),h=g(h,i,j,k,c[0],6,-198630844),k=g(k,h,i,j,c[7],10,1126891415),j=g(j,k,h,i,c[14],15,-1416354905),i=g(i,j,k,h,c[5],21,-57434055),h=g(h,i,j,k,c[12],6,1700485571),k=g(k,h,i,j,c[3],10,-1894986606),j=g(j,k,h,i,c[10],15,-1051523),i=g(i,j,k,h,c[1],21,-2054922799),h=g(h,i,j,k,c[8],6,1873313359),k=g(k,h,i,j,c[15],10,-30611744),j=g(j,k,h,i,c[6],15,-1560198380),i=g(i,j,k,h,c[13],21,1309151649),h=g(h,i,j,k,c[4],6,-145523070),k=g(k,h,i,j,c[11],10,-1120210379),j=g(j,k,h,i,c[2],15,718787259),i=g(i,j,k,h,c[9],21,-343485551),a[0]=b(h,a[0]),a[1]=b(i,a[1]),a[2]=b(j,a[2]),a[3]=b(k,a[3])},i=function(a){var b,c=[];for(b=0;b<64;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c},j=function(a){var b,c=[];for(b=0;b<64;b+=4)c[b>>2]=a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24);return c},k=function(a){var b,c,d,e,f,g,j=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;b<=j;b+=64)h(k,i(a.substring(b-64,b)));for(a=a.substring(b-64),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;b<c;b+=1)d[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;b<16;b+=1)d[b]=0;return e=8*j,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},l=function(a){var b,c,d,e,f,g,i=a.length,k=[1732584193,-271733879,-1732584194,271733878];for(b=64;b<=i;b+=64)h(k,j(a.subarray(b-64,b)));for(a=b-64<i?a.subarray(b-64):new Uint8Array(0),c=a.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;b<c;b+=1)d[b>>2]|=a[b]<<(b%4<<3);if(d[b>>2]|=128<<(b%4<<3),b>55)for(h(k,d),b=0;b<16;b+=1)d[b]=0;return e=8*i,e=e.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(e[2],16),g=parseInt(e[1],16)||0,d[14]=f,d[15]=g,h(k,d),k},m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=function(a){var b,c="";for(b=0;b<4;b+=1)c+=m[a>>8*b+4&15]+m[a>>8*b&15];return c},o=function(a){var b;for(b=0;b<a.length;b+=1)a[b]=n(a[b]);return a.join("")},p=function(a){return o(k(a))},q=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==p("hello")&&(b=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}),q.prototype.append=function(a){return/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),this.appendBinary(a),this},q.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var b,c=this._buff.length;for(b=64;b<=c;b+=64)h(this._state,i(this._buff.substring(b-64,b)));return this._buff=this._buff.substr(b-64),this},q.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;b<e;b+=1)f[b>>2]|=d.charCodeAt(b)<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.prototype._finish=function(a,b){var c,d,e,f=b;if(a[f>>2]|=128<<(f%4<<3),f>55)for(h(this._state,a),f=0;f<16;f+=1)a[f]=0;c=8*this._length,c=c.toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(c[2],16),e=parseInt(c[1],16)||0,a[14]=d,a[15]=e,h(this._state,a)},q.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},q.hash=function(a,b){/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a)));var c=k(a);return b?c:o(c)},q.hashBinary=function(a,b){var c=k(a);return b?c:o(c)},q.ArrayBuffer=function(){this.reset()},q.ArrayBuffer.prototype.append=function(a){var b,c=this._concatArrayBuffer(this._buff,a),d=c.length;for(this._length+=a.byteLength,b=64;b<=d;b+=64)h(this._state,j(c.subarray(b-64,b)));return this._buff=b-64<d?c.subarray(b-64):new Uint8Array(0),this},q.ArrayBuffer.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;b<e;b+=1)f[b>>2]|=d[b]<<(b%4<<3);return this._finish(f,e),c=a?this._state:o(this._state),this.reset(),c},q.ArrayBuffer.prototype._finish=q.prototype._finish,q.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.ArrayBuffer.prototype.destroy=q.prototype.destroy,q.ArrayBuffer.prototype._concatArrayBuffer=function(a,b){var c=a.length,d=new Uint8Array(c+b.byteLength);return d.set(a),d.set(new Uint8Array(b),c),d},q.ArrayBuffer.hash=function(a,b){var c=l(new Uint8Array(a));return b?c:o(c)},q})},{}],36:[function(a,b,c){"use strict";var d=a(17),e=a(6),f=a(14),g={};g.createIndex=d.toPromise(function(a,b){if("object"!=typeof a)return b(new Error("you must provide an index to create"));var c="http"===this.type()?e:f;c.createIndex(this,a,b)}),g.find=d.toPromise(function(a,b){if("undefined"==typeof b&&(b=a,a=void 0),"object"!=typeof a)return b(new Error("you must provide search parameters to find()"));var c="http"===this.type()?e:f;c.find(this,a,b)}),g.getIndexes=d.toPromise(function(a){var b="http"===this.type()?e:f;b.getIndexes(this,a)}),g.deleteIndex=d.toPromise(function(a,b){if("object"!=typeof a)return b(new Error("you must provide an index to delete"));var c="http"===this.type()?e:f;c.deleteIndex(this,a,b)}),b.exports=g,"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(g)},{14:14,17:17,6:6}]},{},[36])(36)});