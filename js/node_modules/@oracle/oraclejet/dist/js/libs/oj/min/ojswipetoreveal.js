/**
 * @license
 * Copyright (c) 2014, 2019, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
define(["ojs/ojcore","jquery","ojs/ojcontext","hammerjs","ojs/ojoffcanvas","promise","touchr"],function(e,t,o,n,a){"use strict";e.SwipeToRevealUtils={};e.SwipeToRevealUtils;return e.SwipeToRevealUtils.setupSwipeActions=function(e,n){var i,s,l,r,c,p,u,d,h,f,v;(i=t(e)).hasClass("oj-swipetoreveal")||(i.addClass("oj-swipetoreveal"),s=i.hasClass("oj-offcanvas-start")?"end":"start",(l={}).selector=i,l._animateWrapperSelector="oj-offcanvas-inner-wrapper",a.setupPanToReveal(l),r=a._getOuterWrapper(i),u=!1,r.on("click.swipetoreveal",function(e){u&&(e.stopImmediatePropagation(),u=!1)}),r.on("touchstart.swipetoreveal",function(e){u=!1,i.hasClass("oj-offcanvas-open")&&i[0].offsetWidth>0&&!i[0].contains(e.target)&&e.preventDefault()}),i.on("ojpanstart",function(e,t){t.direction!==s?e.preventDefault():(o.getContext(r.get(0)).getBusyContext().whenReady().then(function(){i.children().addClass("oj-swipetoreveal-action").css("min-width",""),f=i.children(".oj-swipetoreveal-default").get(0),null==p&&(null!=n&&(c=n.threshold),null!=c?(c=parseInt(c,10),/%$/.test(n.threshold)&&(c=c/100*r.outerWidth())):c=.55*r.outerWidth(),p=Math.min(.3*r.outerWidth(),i.outerWidth()))}),h=(new Date).getTime())}).on("ojpanmove",function(e,o){u||i.children().css("min-width",0),u=!0,null!=f&&(o.distance>c?i.children().each(function(){this!==f&&t(this).addClass("oj-swipetoreveal-hide-when-full")}):i.children().removeClass("oj-swipetoreveal-hide-when-full"))}).on("ojpanend",function(e,o){v=o.distance,null!=f&&v>c&&(d=t.Event("ojdefaultaction"),i.trigger(d,l),e.preventDefault()),v<p&&((new Date).getTime()-h>200||v<10)&&e.preventDefault()}))},e.SwipeToRevealUtils.tearDownSwipeActions=function(e){var o,n,i;(o=t(e)).removeClass("oj-swipetoreveal"),(n={}).selector=o,null!=(i=a._getOuterWrapper(o))&&i.off(".swipetoreveal"),a.tearDownPanToReveal(n)},e.SwipeToRevealUtils});