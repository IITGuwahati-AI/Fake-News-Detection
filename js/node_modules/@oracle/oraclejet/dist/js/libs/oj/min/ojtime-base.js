/**
 * @license
 * Copyright (c) 2014, 2019, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
define(["ojs/ojcore","jquery","ojs/ojconfig","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtToolkit","ojs/ojlocaledata","ojs/ojlogger","ojs/ojvalidation-base","ojs/ojvalidation-datetime"],function(e,t,r,o,n,i,s,a,c){"use strict";e.__registerWidget("oj.dvtTimeComponent",t.oj.dvtBaseComponent,{_ComponentCreate:function(){this._super(),this._SetLocaleHelpers(c)},_GetEventTypes:function(){return["optionChange","viewportChange"]},_HandleEvent:function(e){if("viewportChange"===e.type){var t=new Date(e.viewportStart).toISOString(),r=new Date(e.viewportEnd).toISOString(),o=e.minorAxisScale,n={viewportStart:t,viewportEnd:r,minorAxisScale:o};this._UserOptionChange("viewportStart",t),this._UserOptionChange("viewportEnd",r),this._UserOptionChange("minorAxis.scale",o),this._trigger("viewportChange",null,n)}else this._super(e)},_LoadResources:function(){null==this.options._resources&&(this.options._resources={});var t=this.options._resources;t.grabbingCursor=r.getResourceUrl("resources/internal-deps/dvt/chart/hand-closed.cur"),t.grabCursor=r.getResourceUrl("resources/internal-deps/dvt/chart/hand-open.cur");var o=e.Validation.converterFactory(e.ConverterFactory.CONVERTER_TYPE_DATETIME),n=o.createConverter({hour:"numeric",minute:"2-digit",second:"2-digit"}),i=o.createConverter({hour:"numeric",minute:"2-digit"}),s=o.createConverter({hour:"numeric"}),a=o.createConverter({month:"numeric",day:"2-digit"}),c=o.createConverter({month:"long"}),l={seconds:n,minutes:i,hours:s,days:a,weeks:a,months:c,quarters:c,years:o.createConverter({year:"numeric"})};t.converter=l,t.converterFactory=o,t.firstDayOfWeek=e.LocaleData.getFirstDayOfWeek()},_ProcessTemplates:function(e,t,r,o,n,i,s){var c=i?this._TemplateHandler.getComponentResults(e):null;if(!c){var l=this._GetDataProviderSeriesConfig(),d=this.element[0],u=this._super(e,t,r,o,n,i,s);if(l&&e===l.dataProperty&&!o){var p,h,v,m=[],g={},_=u.values[0],C=0,f=l.defaultSingleSeries,j=l.idAttribute,y=l.itemsKey;for(v=0;v<_.length;v++){var S,T=_[v],w={data:T._itemData,key:T.id,index:v};g[S=null!=T[j]?T[j]:f?"":T.id]?(g[S][y].push(w),m[g[S].index][y].push(T)):((h={componentElement:d,id:S,index:C})[y]=[w],g[S]=h,C+=1,(p={id:S})[y]=[T],m.push(p))}var E=l.templateName,D=l.templateElementName,O=this._TemplateHandler.getTemplates()[E];if(O)for(O=O[0],v=0;v<m.length;v++){h=g[(p=m[v]).id];try{var R=this._TemplateHandler.processNodeTemplate(e,r,O,D,h,p.id);R.id=p.id,R[y]=p[y],m[v]=R}catch(e){a.error(e)}}c={paths:u.paths,values:[m]}}else c=u;i&&this._TemplateHandler.setComponentResults(e,c)}return c},_GetDataProviderSeriesConfig:function(){return{}}})});